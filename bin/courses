#!/bin/bash

courses_list="artificial_intellegence\ndata_engineering_I"

course=$(echo -e $courses_list | rofi -dmenu)

if [[ "$course" == "" ]]; then
    exit
fi

course_pid=$(xdotool search --name $course getwindowpid)

# kill course process if exists
if [[ "$course_pid" != "" ]]; then
    kill $course_pid
fi

alacritty --title $course --hold --working-directory $HOME/university/courses/$course/ 2> /dev/null &

sleep 0.1
course_id=$(xdotool search --name $course)

# xdotool type --window $course_id zathura\ *pdf
# xdotool key --window $course_id Return

case $course in
    introduction_to_datascience)
        pkill jupyter-notebook*
        xdotool type --window $course_id notebook\ lecture_notes/lectures\ --no-browser\ --port\ 8821
        xdotool key --window $course_id Return
        qutebrowser --target window http://127.0.0.1:8821/tree
       ;;
    statistical_machine_learning)
       ;;
esac

sleep 0.5

mkdir -p $HOME/university/courses/$course/personal_notes

xdotool type --window $course_id nvim\ "+normal\ yem"\ personal_notes/notes.md
xdotool key --window $course_id Return
