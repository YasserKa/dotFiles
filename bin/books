#!/bin/bash

books_list="how_to_prove_it"

book=$(echo -e $books_list | rofi -dmenu)

book_pid=$(xdotool search --name $book getwindowpid)

# kill book process if exists
if [[ "$book_pid" != "" ]]; then
    kill $book_pid
fi

alacritty --title $book --hold --working-directory $HOME/notes/markdown/ 2> /dev/null &

sleep 0.1
book_id=$(xdotool search --name $book)
book_path=$HOME"/books"
case $book in
    how_to_prove_it)
book_path+="/math/discrete_math/Daniel J. Velleman - How to Prove It_ A Structured Approach-Cambridge University Press.pdf"
       ;;
esac

zathura "$book_path" &> /dev/null &

sleep 0.5

xdotool type --window $book_id nvim\ "+normal\ yem"\ books.md
xdotool key --window $book_id Return
