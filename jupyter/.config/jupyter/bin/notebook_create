#!/usr/bin/env bash

# Install packages needed for using vim and jupyter notebook
# and create notebooks that sync both notebooks and python files

[[ ! "$1" ]] && echo "Need a name for notebook as an argument" && exit

# Create file using jupyter ascending and sync it using jupytext
python -m jupyter_ascending.scripts.make_pair --base "$2"
python -m jupytext --set-formats ipynb,py:percent "$2.sync.ipynb"

# Run jupyter notebook server if it's not up
pgrep "jupyter" || python -m jupyter notebook "$(pwd)/$2.sync.ipynb" &>/dev/null &
nvim "$(pwd)/$2.sync.py"
