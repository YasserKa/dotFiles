#!/usr/bin/env bash
#
# General script for note taking
# Used for:
# 1- persistent general notes
# 2- Copy latex notes to clipboard
# Dependencies nvim

EXTENSION="$1"
EXTENSION="tex"
TMP_PATH="/tmp/tmp.$EXTENSION"
TITLE="tmp_$EXTENSION"

source "$HOME/.bashrc.d/functions.bash"

if ! is_window_exists "$TITLE"; then
	$TERMINAL --title "$TITLE" -e "$EDITOR" -c 'startinsert' "$TMP_PATH" &
	wait_window "$TITLE"
	i3-msg "[title=\"^$TITLE$\"] scratchpad show, move position center"
else
	pkill -f $TITLE
fi

wait_window_exit "$TITLE"
clipboard_copy "$(cat "$TMP_PATH")"
