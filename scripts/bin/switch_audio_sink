#!/usr/bin/env bash

APP_NAME="switch-sink"

# Switch audio sink between built in, displaylink & bluetooth

PICKED_SINK="$1"
case $PICKED_SINK in
    "Bluetooth" ) 
        Name="bluez_output" 
        icon="bluetooth-64" ;;
    "Built In" ) 
        icon="laptop-sound-64"
        Name="analog-stereo" ;;
    "DisplayLink" ) 
        icon="earbud-sound-64"
        Name="DisplayLink" ;;
    *) notify-send --app-name=$APP_NAME --expire-time=1000 "Couldn't find the $PICKED_SINK sink" && exit 1 ;;
esac

# Get the name of the sink
NEW_SINK=$(pactl list sinks | grep -nE "Name.*$Name" | cut -d : -f 3- | xargs)

notify-send --app-name=$APP_NAME --expire-time=1000 --icon="$icon" "Switching to $PICKED_SINK sink"
pactl set-default-sink "$NEW_SINK"
